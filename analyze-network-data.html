<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-Hans" xml:lang="zh-Hans"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.527">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R 语言数据分析实战 - 23&nbsp; 网络分析</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./analyze-text-data.html" rel="next">
<link href="./power-analysis.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "没有结果",
    "search-matching-documents-text": "匹配的文档",
    "search-copy-link-title": "复制搜索链接",
    "search-hide-matches-text": "隐藏其它匹配结果",
    "search-more-match-text": "更多匹配结果",
    "search-more-matches-text": "更多匹配结果",
    "search-clear-button-title": "清除",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "取消",
    "search-submit-button-title": "提交",
    "search-label": "搜索"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZPWJBMKFL8"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-ZPWJBMKFL8', { 'anonymize_ip': true});
</script><script>
MathJax ={
  tex: {
    macros: {
      bm: ["{\\boldsymbol #1}",1],
    }
  }
};
</script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="切换侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./analyze-network-data.html">数据建模</a></li><li class="breadcrumb-item"><a href="./analyze-network-data.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">网络分析</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="切换侧边栏导航" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R 语言数据分析实战</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/XiangyunHuang/data-analysis-in-action" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./_main.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="切换深色模式"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="搜索"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">欢迎</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">前言</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">介绍</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">数据准备</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling-objects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">数据对象</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling-collection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">数据获取</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">数据清洗</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling-manipulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">数据操作</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./wrangling-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">数据处理</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">数据探索</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-basic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">ggplot2 入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-intermediate.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">基础图形</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">统计图形</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-lattice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">lattice 入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">graphics 入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-tikz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">TikZ 入门</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./visualization-practice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">探索实践</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">数据交流</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interactive-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">交互图形</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interactive-tables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">交互表格</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interactive-applications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">交互应用</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./documents-html.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">HTML 文档</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./documents-latex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">PDF 文档</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./documents-office.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Office 文档</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">统计分析</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./common-statistical-tests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">常见的统计检验</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression-and-correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">回归与相关分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./categorical-data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">分类数据的分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./power-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">统计检验的功效</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">数据建模</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-network-data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">网络分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-text-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">文本分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-survival-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">生存分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-time-series-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">时序分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-point-pattern.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">空间点模式分析</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-spatial-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">预测核辐射强度的分布</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analyze-areal-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">区域数据分析</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">优化建模</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./statistical-computation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">统计计算</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./numerical-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">数值优化</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./optimization-problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">优化问题</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">贝叶斯建模</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./probabilistic-reasoning-framework.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">概率推理框架</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./generalized-linear-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">广义线性模型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hierarchical-normal-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">分层正态模型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mixed-effects-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">混合效应模型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./generalized-additive-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">广义可加模型</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gaussian-processes-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">高斯过程回归</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./time-series-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">时间序列回归</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">机器学习</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./classification-problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">分类问题</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./clustering-problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">聚类问题</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regression-problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">回归问题</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">参考文献</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">附录</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="切換部分">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./notations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">数学符号</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./matrix-operations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">矩阵运算</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Git 和 Github</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">目录</h2>
   
  <ul>
<li><a href="#sec-community-capacity" id="toc-sec-community-capacity" class="nav-link active" data-scroll-target="#sec-community-capacity"><span class="header-section-number">23.1</span> R 语言社区的规模</a></li>
  <li><a href="#sec-community-org" id="toc-sec-community-org" class="nav-link" data-scroll-target="#sec-community-org"><span class="header-section-number">23.2</span> R 语言社区的组织</a></li>
  <li>
<a href="#sec-community-developer" id="toc-sec-community-developer" class="nav-link" data-scroll-target="#sec-community-developer"><span class="header-section-number">23.3</span> R 语言社区的开发者</a>
  <ul class="collapse">
<li><a href="#sec-top-developer" id="toc-sec-top-developer" class="nav-link" data-scroll-target="#sec-top-developer"><span class="header-section-number">23.3.1</span> 最高产的开发者</a></li>
  <li><a href="#sec-coauthor-relation" id="toc-sec-coauthor-relation" class="nav-link" data-scroll-target="#sec-coauthor-relation"><span class="header-section-number">23.3.2</span> 开发者协作关系</a></li>
  <li><a href="#sec-network-degree" id="toc-sec-network-degree" class="nav-link" data-scroll-target="#sec-network-degree"><span class="header-section-number">23.3.3</span> 节点出入度分布</a></li>
  <li><a href="#sec-visual-coauthor-network" id="toc-sec-visual-coauthor-network" class="nav-link" data-scroll-target="#sec-visual-coauthor-network"><span class="header-section-number">23.3.4</span> 可视化协作网络</a></li>
  </ul>
</li>
  <li><a href="#sec-analysis-network-data-exercise" id="toc-sec-analysis-network-data-exercise" class="nav-link" data-scroll-target="#sec-analysis-network-data-exercise"><span class="header-section-number">23.4</span> 习题</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/XiangyunHuang/data-analysis-in-action/blob/main/analyze-network-data.qmd" class="toc-action"><i class="bi bi-github"></i>查看代码</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./analyze-network-data.html">数据建模</a></li><li class="breadcrumb-item"><a href="./analyze-network-data.html"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">网络分析</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-analysis-network-data" class="quarto-section-identifier"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">网络分析</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>网络数据分析又是另一个大话题，微信、微博、论坛、知乎、豆瓣、美团等等应用都或多或少自带了社交属性。人不能脱离社会存在，社交是人的一种本能，身处洪流之中，即是复杂社会网络中的一个节点。网络分析的内容有很多，比如社区探测、节点影响力分析等。</p>
<p>网络图是表示节点之间关系的图，核心在于关系的刻画，用来表达网络关系的是稀疏矩阵，以及为处理这种矩阵而专门优化的矩阵计算库，如 <strong>Matrix</strong> 、<a href="https://github.com/rexyai/rsparse"><strong>rsparse</strong></a> 和 <strong>RcppEigen</strong> <span class="citation" data-cites="Bates2013">(<a href="references.html#ref-Bates2013" role="doc-biblioref">Bates 和 Eddelbuettel 2013</a>)</span>，PageRank 应该是大家最为熟悉的网络数据挖掘算法，图关系挖掘和计算的应用场景非常广泛，如社交推荐（社交 App）、风险控制（银行征信、企业查）、深度学习（图神经网络）、知识图谱（商户、商家、客户的实体关系网络）、区块链、物联网（IoT）、反洗钱（金融监管）、数据治理（数据血缘图谱）等。</p>
<p>企业级的图存储和计算框架，比较有名（可能是最有名的），反正，笔者最先听说的是<a href="https://github.com/neo4j/neo4j">Neo4j</a> ，它有以 AGPL 协议发布的开源版本，还有商业版本。<a href="https://github.com/vesoft-inc/nebula">Nebula Graph</a> 分布式开源图数据库，高扩展性和高可用性，支持千亿节点、万亿条边、毫秒级查询，有<a href="https://github.com/vesoft-inc/nebula-docs-cn/">中文文档</a>，有企业应用案例，<a href="https://mp.weixin.qq.com/s/aYd5tqwogJYfkJXhVNuNpg">美团图数据库平台建设及业务实践</a>。阿里研发的 <a href="https://github.com/alibaba/GraphScope">GraphScope</a> 提供一站式大规模图计算系统，支持图神经网络计算。<a href="https://github.com/hugegraph/hugegraph">HugeGraph</a> 图数据库应用于<a href="https://zhuanlan.zhihu.com/p/114665466">金融反欺诈实践</a>。</p>
<p>R 语言网络分析方面的著作有 Erick Kolaczyk 的书籍《Statistical Analysis of Network Data with R》<span class="citation" data-cites="Kolaczyk2020">(<a href="references.html#ref-Kolaczyk2020" role="doc-biblioref">Kolaczyk 和 Csárdi 2020</a>)</span>，网络可视化方面，推荐 Hadley Wickham 的著作《ggplot2: Elegant Graphics for Data Analysis》<span class="citation" data-cites="Hadley2016">(<a href="references.html#ref-Hadley2016" role="doc-biblioref">Wickham 2016</a>)</span>，Sam Tyner 等人的文章《Network Visualization with ggplot2》<span class="citation" data-cites="Tyner2017">(<a href="references.html#ref-Tyner2017" role="doc-biblioref">Tyner, Briatte, 和 Hofmann 2017</a>)</span> 也值得一看。</p>
<p><a href="https://github.com/igraph/igraph">igraph</a> 是非常流行和核心的网络分析 C 语言库，它提供有多种语言的接口，其 R 语言接口 <a href="https://github.com/igraph/rigraph">igraph</a> 包也被很多其它做网络分析的 R 包所引用。开源的 <a href="https://github.com/gephi/gephi">Gephi</a> 软件适合处理中等规模的网络分析和可视化。大规模图计算可以用 Apache Spark 的 <a href="https://spark.apache.org/graphx/">GraphX</a>。R 语言这层，主要还是对应数据分析和数据产品，用于在内部咨询和商业分析。</p>
<p>本文主要用到的工具有 <a href="https://github.com/igraph/igraph">igraph</a> 包，操作图数据和图计算的 <a href="https://github.com/thomasp85/tidygraph">tidygraph</a> 包，以及可视化图数据的 <a href="https://github.com/thomasp85/ggraph">ggraph</a> 包。此外，读者若有兴趣，可以用 <a href="https://github.com/datastorm-open/visNetwork">visNetwork</a> 包制作交互式网络图形，它是 JS 库 <a href="https://github.com/visjs/vis-network">vis-network</a> 的 R 语言接口。而 Richard Iannone 开发的 <a href="https://github.com/rich-iannone/DiagrammeR">DiagrammeR</a> 包可以制作静态的矢量网页图形。</p>
<p>本文将分析 R 语言社区开发者之间的协作关系网络。首先基于 CRAN 上发布的 R 包元数据信息，了解 R 语言社区 R 包及其维护者的规模，以及根据元数据中的信息发掘社区中的组织，最后，统计开发者维护的 R 包数据，分析开发者在网络中的影响力，并将结果可视化。</p>
<section id="sec-community-capacity" class="level2" data-number="23.1"><h2 data-number="23.1" class="anchored" data-anchor-id="sec-community-capacity">
<span class="header-section-number">23.1</span> R 语言社区的规模</h2>
<p>从 CRAN 上的 R 包及其开发者数量来看目前 R 语言社区规模。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># 设置就近的 CRAN 镜像站点</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">Sys.setenv</span>(<span class="at">R_CRAN_WEB =</span> <span class="st">"https://mirrors.tuna.tsinghua.edu.cn/CRAN"</span>)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># 获取 R 包元数据</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>pdb <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">CRAN_package_db</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>截止 2022-12-31 CRAN 上发布的 R 包有 18976 个，CRAN 进入年末维护期 2022-12-22 至 2023-01-05。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>pdb <span class="ot">&lt;-</span> <span class="fu">subset</span>(</span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="at">x =</span> pdb, <span class="at">subset =</span> <span class="sc">!</span><span class="fu">duplicated</span>(Package),</span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Maintainer"</span>, <span class="st">"License"</span>, <span class="st">"Title"</span>, <span class="st">"Date"</span>, <span class="st">"Published"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>距离上次更新的时间分布，有的包是一周内更新的，也有的是 10 多年未更新的。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>pdb<span class="sc">$</span>date_diff <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">as.Date</span>(<span class="st">"2022-12-31"</span>) <span class="sc">-</span> <span class="fu">as.Date</span>(pdb<span class="sc">$</span>Published))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>根据发布日期 Published 构造新的一列 — 发布年份。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>pdb<span class="sc">$</span>published_year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(<span class="fu">as.Date</span>(pdb<span class="sc">$</span>Published), <span class="st">"%Y"</span>))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>然后按年统计更新的 R 包数量，如 <a href="#fig-updated-package" class="quarto-xref">图&nbsp;<span>23.1</span></a> 所示，过去 1 年内更新的 R 包有 8112 个（包含新出现的 R 包），占总数 8112 / 18976 = 42.75%，过去 2 年内更新的 R 包有 11553 个，占总数 11553 / 18976 = 60.88%，这个占比越高说明社区开发者越活跃。还可以换个说法，以 2020 年为例，总数 18976 个 R 包当中有 2470 个 R 包的更新日期停留在 2020 年，占比 2470 / 18976 = 13.02%。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">aggregate</span>(<span class="at">data =</span> pdb, Package <span class="sc">~</span> published_year, <span class="at">FUN =</span> length) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> published_year, <span class="at">y =</span> Package)) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"gray20"</span>) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"年份"</span>, <span class="at">y =</span> <span class="st">"R 包数量"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-updated-package" class="quarto-figure quarto-figure-center anchored" width="480">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-updated-package-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-updated-package-1.png" class="img-fluid figure-img" width="480">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-updated-package-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.1: CRAN 上 R 包的更新情况
</figcaption></figure>
</div>
</div>
</div>
<p>截止 2022-12-31，CRAN 上 R 包的维护者有 10049 人，其中有多少人在 2022 年更新了自己的 R 包呢？有 4820 个维护者，占比 47.96%，也就是说 2022 年，有 4820 个开发者更新了 8112 个 R 包，人均更新 1.68 个 R 包，下 <a href="#fig-active-maintainer" class="quarto-xref">图&nbsp;<span>23.2</span></a> 按 R 包发布年份统计开发者数量。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># 清理维护者字段，同一个开发者可能有多个邮箱</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>pdb<span class="sc">$</span>Maintainer2 <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="at">pattern =</span> <span class="st">"&lt;.*?&gt;"</span>, <span class="at">replacement =</span> <span class="st">""</span>, <span class="at">x =</span> pdb<span class="sc">$</span>Maintainer)</span>
<span id="cb6-3"><a href="#cb6-3"></a>pdb<span class="sc">$</span>Maintainer2 <span class="ot">&lt;-</span> <span class="fu">trimws</span>(pdb<span class="sc">$</span>Maintainer2, <span class="at">which =</span> <span class="st">"both"</span>, <span class="at">whitespace =</span> <span class="st">"[ </span><span class="sc">\t\r\n</span><span class="st">]"</span>)</span>
<span id="cb6-4"><a href="#cb6-4"></a>pdb<span class="sc">$</span>Maintainer2 <span class="ot">&lt;-</span> <span class="fu">tolower</span>(pdb<span class="sc">$</span>Maintainer2)</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="co"># 维护者总数</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="fu">length</span>(<span class="fu">unique</span>(pdb<span class="sc">$</span>Maintainer2))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 10049</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">aggregate</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="at">data =</span> pdb, Maintainer2 <span class="sc">~</span> published_year,</span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb8-4"><a href="#cb8-4"></a>    <span class="fu">length</span>(<span class="fu">unique</span>(x))</span>
<span id="cb8-5"><a href="#cb8-5"></a>  }</span>
<span id="cb8-6"><a href="#cb8-6"></a>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> published_year, <span class="at">y =</span> Maintainer2)) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"gray20"</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"年份"</span>, <span class="at">y =</span> <span class="st">"开发者数量"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-active-maintainer" class="quarto-figure quarto-figure-center anchored" width="480">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-active-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-active-maintainer-1.png" class="img-fluid figure-img" width="480">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-active-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.2: CRAN 上的维护者活跃情况
</figcaption></figure>
</div>
</div>
</div>
</section><section id="sec-community-org" class="level2" data-number="23.2"><h2 data-number="23.2" class="anchored" data-anchor-id="sec-community-org">
<span class="header-section-number">23.2</span> R 语言社区的组织</h2>
<p>有的组织基本停止了开发，如 <a href="https://github.com/omegahat">Omegahat</a>，有的被商业公司收购后，不再活跃了，如<a href="https://github.com/RevolutionAnalytics">Revolution Analytics</a>。除了众所周知的 <a href="https://github.com/tidyverse/tidyverse">tidyverse</a> <span class="citation" data-cites="Wickham2019">(<a href="references.html#ref-Wickham2019" role="doc-biblioref">Wickham 等 2019</a>)</span> 和 <a href="https://github.com/tidymodels/tidymodels">tidymodels</a> <span class="citation" data-cites="Kuhn2020">(<a href="references.html#ref-Kuhn2020" role="doc-biblioref">Kuhn 和 Wickham 2020</a>)</span>，还有很多数据分析、建模的工具箱，如 <a href="https://github.com/mlr-org/mlr3verse">mlr3verse</a> <span class="citation" data-cites="Lang2023">(<a href="references.html#ref-Lang2023" role="doc-biblioref">Lang 和 Schratz 2023</a>)</span>、<a href="https://github.com/easystats/easystats">easystats</a> <span class="citation" data-cites="Makowski2022">(<a href="references.html#ref-Makowski2022" role="doc-biblioref">Lüdecke 等 2022</a>)</span>、<a href="https://github.com/strengejacke/strengejacke">strengejacke</a> <span class="citation" data-cites="Daniel2019">(<a href="references.html#ref-Daniel2019" role="doc-biblioref">Lüdecke 2019</a>)</span> 和 <a href="https://github.com/ModelOriented/DrWhy">DrWhy</a> <span class="citation" data-cites="DrWhy2023">(<a href="references.html#ref-DrWhy2023" role="doc-biblioref">Biecek 2023</a>)</span>。它们作为解决方案大都属于一些组织，还有深藏功与名，有待笔者挖掘的。因不存在明显的规律，下面从开发者的邮箱出发，隶属企业、组织往往有统一的邮箱后缀。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># 抽取邮件后缀</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>str_extract <span class="ot">&lt;-</span> <span class="cf">function</span>(text, pattern, ...) <span class="fu">regmatches</span>(text, <span class="fu">regexpr</span>(pattern, text, ...))</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="co"># 移除 ORPHANED</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>pdb <span class="ot">&lt;-</span> <span class="fu">subset</span>(pdb, <span class="at">subset =</span> Maintainer <span class="sc">!=</span> <span class="st">"ORPHANED"</span>)</span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># email</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>pdb<span class="sc">$</span>Email <span class="ot">&lt;-</span> <span class="fu">str_extract</span>(<span class="at">text =</span> pdb<span class="sc">$</span>Maintainer, <span class="at">pattern =</span> <span class="st">"&lt;.*?&gt;"</span>)</span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># email_suffix</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>pdb<span class="sc">$</span>Email_suffix <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="at">x =</span> pdb<span class="sc">$</span>Email, <span class="at">pattern =</span> <span class="st">".*?@(.*?)&gt;"</span>, <span class="at">replacement =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>按组织统计扩展包的数量（总的 R 包数量约 2 万），各个组织贡献的 R 包</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>pdb_pkg <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="at">data =</span> pdb, Package <span class="sc">~</span> Email_suffix, <span class="at">FUN =</span> <span class="cf">function</span>(x) { <span class="fu">length</span>(<span class="fu">unique</span>(x)) }</span>
<span id="cb10-3"><a href="#cb10-3"></a>)</span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">head</span>(pdb_pkg[<span class="fu">order</span>(pdb_pkg<span class="sc">$</span>Package, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ], <span class="dv">20</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;        Email_suffix Package
#&gt; 876       gmail.com    6968
#&gt; 2044    rstudio.com     208
#&gt; 979     hotmail.com     185
#&gt; 1825    outlook.com     152
#&gt; 1971  R-project.org     106
#&gt; 2           163.com      94
#&gt; 210    berkeley.edu      91
#&gt; 2559      umich.edu      91
#&gt; 2819         uw.edu      74
#&gt; 1927 protonmail.com      73
#&gt; 2564        umn.edu      69
#&gt; 581      debian.org      68
#&gt; 2951      yahoo.com      68
#&gt; 1828     outlook.fr      63
#&gt; 2212   stanford.edu      58
#&gt; 155  auckland.ac.nz      57
#&gt; 887          gmx.de      55
#&gt; 2911       wisc.edu      55
#&gt; 895  googlemail.com      50
#&gt; 1970  r-project.org      50</code></pre>
</div>
</div>
<p>不难看出，至少有如下几类：</p>
<ol type="1">
<li>邮件服务提供商。6968 个 R 包使用 gmail 邮箱作为联系维护者的方式，googlemail.com 也是谷歌提供的服务。hotmail.com 和 outlook.com 都是微软提供的邮箱服务，outlook.fr （法国）也是，除此之外，比较大的邮件服务提供商就是 163.com（网易）、 protonmail.com 和 yahoo.com （雅虎）等。</li>
<li>商业组织。208 个 R 包来自 RStudio 公司的员工，这些维护者使用 RStudio 公司提供的邮箱。</li>
<li>开源组织。R-project.org 和 r-project.org 都是 R 语言组织的联系方式，自不必多说，R 语言核心团队成员不仅维护 R 软件源码，还维护了很多 R 包。debian.org 是 Debian 组织的联系方式，都是开源组织（Open Source Org）。</li>
<li>大学学院机构。berkeley.edu 、umich.edu 等以 edu 结尾的北美（国）的大学，gmx.de、 posteo.de 等以 de 结尾的德国大学，ucl.ac.uk 等以 uk 结尾的英国的大学，auckland.ac.nz 等以 nz 结尾的新西兰的大学，uwaterloo.ca 等以 ca 结尾的加拿大的大学。</li>
</ol>
<p>按组织统计开发者的数量（总的开发者数量约 1 万），各个组织的 R 包开发者。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>pdb_org <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(</span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="at">data =</span> pdb, Maintainer2 <span class="sc">~</span> Email_suffix, <span class="at">FUN =</span> <span class="cf">function</span>(x) { <span class="fu">length</span>(<span class="fu">unique</span>(x)) }</span>
<span id="cb12-3"><a href="#cb12-3"></a>)</span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="fu">head</span>(pdb_org[<span class="fu">order</span>(pdb_org<span class="sc">$</span>Maintainer2, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ], <span class="dv">20</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;        Email_suffix Maintainer2
#&gt; 876       gmail.com        3795
#&gt; 979     hotmail.com         109
#&gt; 1825    outlook.com          87
#&gt; 2           163.com          57
#&gt; 2559      umich.edu          54
#&gt; 2951      yahoo.com          51
#&gt; 2564        umn.edu          47
#&gt; 1927 protonmail.com          46
#&gt; 2819         uw.edu          46
#&gt; 887          gmx.de          34
#&gt; 210    berkeley.edu          33
#&gt; 2044    rstudio.com          30
#&gt; 895  googlemail.com          28
#&gt; 2212   stanford.edu          27
#&gt; 468    columbia.edu          26
#&gt; 1114       inrae.fr          26
#&gt; 2451      ucl.ac.uk          25
#&gt; 2964       yale.edu          25
#&gt; 635        duke.edu          23
#&gt; 1906      posteo.de          23</code></pre>
</div>
</div>
<p>可见，大部分开发者采用邮件服务提供商的邮件地址。3795 个开发者使用来自谷歌的 gmail.com、196 个开发者使用来自微软的 hotmail.com 和 outlook.com，57 个开发者使用来自网易的 163.com，51 个开发者使用来自雅虎的 yahoo.com，46 个开发者使用来自 Proton 的 protonmail.com。</p>
<p>其一马太效应，往头部集中，其二，长尾分布，尾部占比接近甚至超过 50%。1666 个开发者来自以 edu 为后缀的邮箱。各个大学及其 R 包开发者数据如下：</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">sum</span>(pdb_org[<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"edu$"</span>, <span class="at">x =</span> pdb_org<span class="sc">$</span>Email_suffix), <span class="st">"Maintainer2"</span>])</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 1666</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>pdb_org_edu <span class="ot">&lt;-</span> pdb_org[<span class="fu">grepl</span>(<span class="at">pattern =</span> <span class="st">"edu$"</span>, <span class="at">x =</span> pdb_org<span class="sc">$</span>Email_suffix), ]</span>
<span id="cb16-2"><a href="#cb16-2"></a>pdb_org_edu[<span class="fu">order</span>(pdb_org_edu<span class="sc">$</span>Maintainer2, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ] <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">20</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;        Email_suffix Maintainer2
#&gt; 2559      umich.edu          54
#&gt; 2564        umn.edu          47
#&gt; 2819         uw.edu          46
#&gt; 210    berkeley.edu          33
#&gt; 2212   stanford.edu          27
#&gt; 468    columbia.edu          26
#&gt; 2964       yale.edu          25
#&gt; 635        duke.edu          23
#&gt; 2911       wisc.edu          23
#&gt; 482     cornell.edu          22
#&gt; 2444    ucdavis.edu          21
#&gt; 1929        psu.edu          19
#&gt; 2449   uchicago.edu          19
#&gt; 2830 vanderbilt.edu          19
#&gt; 1660       ncsu.edu          18
#&gt; 1663         nd.edu          18
#&gt; 1008    iastate.edu          17
#&gt; 1919  princeton.edu          17
#&gt; 1815        osu.edu          16
#&gt; 2523      uiowa.edu          16</code></pre>
</div>
</div>
<p>好吧，几乎全是美国各个 NB 大学的，比如华盛顿大学（ uw.edu）、密歇根大学（umich.edu）、加州伯克利大学（berkeley.edu）等等。顺便一说，欧美各个大学的网站，特别是统计院系很厉害的，已经帮大家收集得差不多了，有留学打算的读者自取，邮箱后缀就是学校/院官网。</p>
<p>有些邮箱后缀带有院系，但是并没有向上合并到学校这一级，比如 <code>stanford.edu</code> 、<code>stat.stanford.edu</code> 和 <code>alumni.stanford.edu</code> 等没有合并统计，所以排名仅供参考。有的邮箱来自教育机构，但是不以 <code>edu</code> 结尾，实际使用 <code>edu</code> 邮箱的教育机构大部份位于美国，比如新西兰奥克兰大学 <code>auckland.ac.nz</code> 瑞士苏黎世联邦理工学院 <code>stat.math.ethz.ch</code>如果读者还知道其他一般规律的，或者提供大学邮箱列表或者有其它更好的办法，就可以把这个数字做得更加精准一些。只是改变这个结论恐怕很难。</p>
<details class="code-fold"><summary>代码</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>core_dev <span class="ot">&lt;-</span> <span class="fu">subset</span>(pdb,</span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="at">subset =</span> <span class="fu">grepl</span>(</span>
<span id="cb18-3"><a href="#cb18-3"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="at">pattern =</span> <span class="fu">paste0</span>(<span class="fu">c</span>(</span>
<span id="cb18-5"><a href="#cb18-5"></a>      <span class="st">"(@[Rr]-project</span><span class="sc">\\</span><span class="st">.org)"</span>,</span>
<span id="cb18-6"><a href="#cb18-6"></a>      <span class="st">"(ripley@stats.ox.ac.uk)"</span>, <span class="co"># Brian Ripley</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>      <span class="st">"(p.murrell@auckland.ac.nz)"</span>, <span class="co"># Paul Murrell</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>      <span class="st">"(paul@stat.auckland.ac.nz)"</span>, <span class="co"># Paul Murrell</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>      <span class="st">"(maechler@stat.math.ethz.ch)"</span>, <span class="co"># Martin Maechler</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>      <span class="st">"(mmaechler+Matrix@gmail.com)"</span>, <span class="co"># Martin Maechler</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>      <span class="st">"(bates@stat.wisc.edu)"</span>, <span class="co"># Douglas Bates</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>      <span class="st">"(pd.mes@cbs.dk)"</span>, <span class="co"># Peter Dalgaard</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>      <span class="st">"(ligges@statistik.tu-dortmund.de)"</span>, <span class="co"># Uwe Ligges</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>      <span class="st">"(tlumley@u.washington.edu)"</span>, <span class="co"># Thomas Lumley</span></span>
<span id="cb18-15"><a href="#cb18-15"></a>      <span class="st">"(t.lumley@auckland.ac.nz)"</span>, <span class="co"># Thomas Lumley</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>      <span class="st">"(martyn.plummer@gmail.com)"</span>, <span class="co"># Martyn Plummer</span></span>
<span id="cb18-17"><a href="#cb18-17"></a>      <span class="st">"(luke-tierney@uiowa.edu)"</span>, <span class="co"># Luke Tierney</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>      <span class="st">"(stefano.iacus@unimi.it)"</span>, <span class="co"># Stefano M. Iacus</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>      <span class="st">"(murdoch.duncan@gmail.com)"</span>, <span class="co"># Duncan Murdoch</span></span>
<span id="cb18-20"><a href="#cb18-20"></a>      <span class="st">"(michafla@gene.com)"</span> <span class="co"># Michael Lawrence</span></span>
<span id="cb18-21"><a href="#cb18-21"></a>    ), <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb18-22"><a href="#cb18-22"></a>  ),</span>
<span id="cb18-23"><a href="#cb18-23"></a>  <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Maintainer"</span>)</span>
<span id="cb18-24"><a href="#cb18-24"></a>) <span class="sc">|&gt;</span></span>
<span id="cb18-25"><a href="#cb18-25"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">gsub</span>(</span>
<span id="cb18-26"><a href="#cb18-26"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-27"><a href="#cb18-27"></a>    <span class="at">pattern =</span> <span class="st">'(&lt;([^&lt;&gt;]*)&gt;)|(")'</span>,</span>
<span id="cb18-28"><a href="#cb18-28"></a>    <span class="at">replacement =</span> <span class="st">""</span></span>
<span id="cb18-29"><a href="#cb18-29"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb18-30"><a href="#cb18-30"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">gsub</span>(</span>
<span id="cb18-31"><a href="#cb18-31"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-32"><a href="#cb18-32"></a>    <span class="at">pattern =</span> <span class="st">"(R-core)|(R Core Team)"</span>,</span>
<span id="cb18-33"><a href="#cb18-33"></a>    <span class="at">replacement =</span> <span class="st">"CRAN Team"</span></span>
<span id="cb18-34"><a href="#cb18-34"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb18-35"><a href="#cb18-35"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">gsub</span>(</span>
<span id="cb18-36"><a href="#cb18-36"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-37"><a href="#cb18-37"></a>    <span class="at">pattern =</span> <span class="st">"(S. M. Iacus)|(Stefano M.Iacus)|(Stefano Maria Iacus)"</span>,</span>
<span id="cb18-38"><a href="#cb18-38"></a>    <span class="at">replacement =</span> <span class="st">"Stefano M. Iacus"</span></span>
<span id="cb18-39"><a href="#cb18-39"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb18-40"><a href="#cb18-40"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">gsub</span>(</span>
<span id="cb18-41"><a href="#cb18-41"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-42"><a href="#cb18-42"></a>    <span class="at">pattern =</span> <span class="st">"(Toby Hocking)"</span>,</span>
<span id="cb18-43"><a href="#cb18-43"></a>    <span class="at">replacement =</span> <span class="st">"Toby Dylan Hocking"</span></span>
<span id="cb18-44"><a href="#cb18-44"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb18-45"><a href="#cb18-45"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">gsub</span>(</span>
<span id="cb18-46"><a href="#cb18-46"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb18-47"><a href="#cb18-47"></a>    <span class="at">pattern =</span> <span class="st">"(John M Chambers)"</span>,</span>
<span id="cb18-48"><a href="#cb18-48"></a>    <span class="at">replacement =</span> <span class="st">"John Chambers"</span></span>
<span id="cb18-49"><a href="#cb18-49"></a>  ))</span>
<span id="cb18-50"><a href="#cb18-50"></a></span>
<span id="cb18-51"><a href="#cb18-51"></a>tmp <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">data =</span> core_dev, Package <span class="sc">~</span> Maintainer, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)))</span>
<span id="cb18-52"><a href="#cb18-52"></a>tmp <span class="ot">&lt;-</span> tmp[<span class="fu">order</span>(tmp<span class="sc">$</span>Package, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb18-53"><a href="#cb18-53"></a></span>
<span id="cb18-54"><a href="#cb18-54"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(tmp, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(tmp) <span class="sc">/</span> <span class="dv">2</span>)),</span>
<span id="cb18-55"><a href="#cb18-55"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"团队成员"</span>, <span class="st">"R 包数量"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb18-56"><a href="#cb18-56"></a>)</span>
<span id="cb18-57"><a href="#cb18-57"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">tail</span>(tmp, <span class="fu">floor</span>(<span class="fu">nrow</span>(tmp) <span class="sc">/</span> <span class="dv">2</span>)),</span>
<span id="cb18-58"><a href="#cb18-58"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"团队成员"</span>, <span class="st">"R 包数量"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb18-59"><a href="#cb18-59"></a>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="tbl-cran-developers" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-cran-developers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;23.1: CRAN 团队开发维护 R 包数量情况
</figcaption><div aria-describedby="tbl-cran-developers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-cran-developers" style="flex-basis: 50.0%;justify-content: center;display: flex;">
<div id="tbl-cran-developers-1" class="anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-cran-developers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 表
</figcaption><div aria-describedby="tbl-cran-developers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-cran-developers-1" class="table">
<thead><tr class="header">
<th style="text-align: left;">团队成员</th>
<th style="text-align: right;">R 包数量</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Kurt Hornik</td>
<td style="text-align: right;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">Simon Urbanek</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Achim Zeileis</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">Martin Maechler</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Torsten Hothorn</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="even">
<td style="text-align: left;">Paul Murrell</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Toby Dylan Hocking</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brian Ripley</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Thomas Lumley</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="even">
<td style="text-align: left;">Uwe Ligges</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Duncan Murdoch</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">David Meyer</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CRAN Team</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-cran-developers" style="flex-basis: 50.0%;justify-content: center;display: flex;">
<div id="tbl-cran-developers-2" class="anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-cran-developers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 续表
</figcaption><div aria-describedby="tbl-cran-developers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-cran-developers-2" class="table">
<thead><tr class="header">
<th style="text-align: left;">团队成员</th>
<th style="text-align: right;">R 包数量</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Friedrich Leisch</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Luke Tierney</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Michael Lawrence</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Stefan Theussl</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Bettina Grün</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">John Chambers</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Simon Wood</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bettina Gruen</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Deepayan Sarkar</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Douglas Bates</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Martyn Plummer</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Peter Dalgaard</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<p>Kurt Hornik、Simon Urbanek、Achim Zeileis 、Martin Maechler、Torsten Hothorn等真是高产呐！除了维护 R 语言核心代码，还开发维护了<strong>20</strong> 多个 R 包。以 Brian Ripley 为例，看看他都具体维护了哪些 R 包。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">subset</span>(pdb,</span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="at">subset =</span> <span class="fu">grepl</span>(</span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="at">x =</span> Maintainer,</span>
<span id="cb19-4"><a href="#cb19-4"></a>    <span class="at">pattern =</span> <span class="st">"Brian Ripley"</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  ),</span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Title"</span>), <span class="at">drop =</span> <span class="cn">TRUE</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>) <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="fu">unique</span>(<span class="at">by =</span> <span class="st">"Package"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-9"><a href="#cb19-9"></a>  <span class="fu">transform</span>(<span class="at">Title =</span> <span class="fu">gsub</span>(</span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="at">pattern =</span> <span class="st">"(</span><span class="sc">\\\n</span><span class="st">)"</span>,</span>
<span id="cb19-11"><a href="#cb19-11"></a>    <span class="at">replacement =</span> <span class="st">" "</span>, <span class="at">x =</span> Title</span>
<span id="cb19-12"><a href="#cb19-12"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-ripley" class="cell anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-ripley-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;23.2: Brian Ripley 维护的 R 包
</figcaption><div aria-describedby="tbl-ripley-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="cell table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 86%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Package</th>
<th style="text-align: left;">Title</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">boot</td>
<td style="text-align: left;">Bootstrap Functions (Originally by Angelo Canty for S)</td>
</tr>
<tr class="even">
<td style="text-align: left;">class</td>
<td style="text-align: left;">Functions for Classification</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fastICA</td>
<td style="text-align: left;">FastICA Algorithms to Perform ICA and Projection Pursuit</td>
</tr>
<tr class="even">
<td style="text-align: left;">gee</td>
<td style="text-align: left;">Generalized Estimation Equation Solver</td>
</tr>
<tr class="odd">
<td style="text-align: left;">KernSmooth</td>
<td style="text-align: left;">Functions for Kernel Smoothing Supporting Wand &amp; Jones (1995)</td>
</tr>
<tr class="even">
<td style="text-align: left;">MASS</td>
<td style="text-align: left;">Support Functions and Datasets for Venables and Ripley’s MASS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">mix</td>
<td style="text-align: left;">Estimation/Multiple Imputation for Mixed Categorical and Continuous Data</td>
</tr>
<tr class="even">
<td style="text-align: left;">nnet</td>
<td style="text-align: left;">Feed-Forward Neural Networks and Multinomial Log-Linear Models</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pspline</td>
<td style="text-align: left;">Penalized Smoothing Splines</td>
</tr>
<tr class="even">
<td style="text-align: left;">RODBC</td>
<td style="text-align: left;">ODBC Database Access</td>
</tr>
<tr class="odd">
<td style="text-align: left;">spatial</td>
<td style="text-align: left;">Functions for Kriging and Point Pattern Analysis</td>
</tr>
<tr class="even">
<td style="text-align: left;">tree</td>
<td style="text-align: left;">Classification and Regression Trees</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>震惊！有一半收录在 R 软件中，所以已经持续维护 <strong>20</strong> 多年了。</p>
<p>根据邮箱后缀匹配抽取的 R 包及开发者，规则也许不能覆盖所有的情况，读者若有补充，欢迎 PR 给我。举个例子，Brian Ripley 的邮箱 <a href="mailto:ripley@stats.ox.ac.uk" class="email">ripley@stats.ox.ac.uk</a> 就不是一路，需要单独添加。</p>
<details class="code-fold"><summary>代码</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>extract_maintainer <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb20-2"><a href="#cb20-2"></a>  x <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="at">pattern =</span> <span class="st">"&lt;.*?&gt;"</span>, <span class="at">replacement =</span> <span class="st">""</span>, <span class="at">x =</span> x)</span>
<span id="cb20-3"><a href="#cb20-3"></a>  x <span class="ot">&lt;-</span> <span class="fu">trimws</span>(x, <span class="at">which =</span> <span class="st">"both"</span>, <span class="at">whitespace =</span> <span class="st">"[ </span><span class="sc">\t\r\n</span><span class="st">]"</span>)</span>
<span id="cb20-4"><a href="#cb20-4"></a>  x</span>
<span id="cb20-5"><a href="#cb20-5"></a>}</span>
<span id="cb20-6"><a href="#cb20-6"></a>rstudio_db <span class="ot">&lt;-</span> <span class="fu">subset</span>(pdb,</span>
<span id="cb20-7"><a href="#cb20-7"></a>  <span class="at">subset =</span> <span class="fu">grepl</span>(<span class="at">x =</span> Maintainer, <span class="at">pattern =</span> <span class="st">"rstudio.com"</span>),</span>
<span id="cb20-8"><a href="#cb20-8"></a>  <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Maintainer"</span>)</span>
<span id="cb20-9"><a href="#cb20-9"></a>) <span class="sc">|&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>  <span class="fu">transform</span>(<span class="at">Maintainer =</span> <span class="fu">extract_maintainer</span>(Maintainer))</span>
<span id="cb20-11"><a href="#cb20-11"></a></span>
<span id="cb20-12"><a href="#cb20-12"></a>rstudio_db <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">data =</span> rstudio_db, Package <span class="sc">~</span> Maintainer, <span class="at">FUN =</span> <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)))</span>
<span id="cb20-13"><a href="#cb20-13"></a>rstudio_db <span class="ot">&lt;-</span> rstudio_db[<span class="fu">order</span>(rstudio_db<span class="sc">$</span>Package, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), ]</span>
<span id="cb20-14"><a href="#cb20-14"></a></span>
<span id="cb20-15"><a href="#cb20-15"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(rstudio_db, <span class="fu">ceiling</span>(<span class="fu">nrow</span>(rstudio_db) <span class="sc">/</span> <span class="dv">2</span>)),</span>
<span id="cb20-16"><a href="#cb20-16"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"团队成员"</span>, <span class="st">"R 包数量"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb20-17"><a href="#cb20-17"></a>)</span>
<span id="cb20-18"><a href="#cb20-18"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">tail</span>(rstudio_db, <span class="fu">floor</span>(<span class="fu">nrow</span>(rstudio_db) <span class="sc">/</span> <span class="dv">2</span>)),</span>
<span id="cb20-19"><a href="#cb20-19"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"团队成员"</span>, <span class="st">"R 包数量"</span>), <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb20-20"><a href="#cb20-20"></a>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div id="tbl-rstudio-developers" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure"><figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-rstudio-developers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
表格&nbsp;23.3: RStudio 团队开发维护 R 包数量情况（部分）
</figcaption><div aria-describedby="tbl-rstudio-developers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-rstudio-developers" style="flex-basis: 50.0%;justify-content: center;display: flex;">
<div id="tbl-rstudio-developers-1" class="anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-rstudio-developers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 表
</figcaption><div aria-describedby="tbl-rstudio-developers-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-rstudio-developers-1" class="table">
<thead><tr class="header">
<th style="text-align: left;">团队成员</th>
<th style="text-align: right;">R 包数量</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Hadley Wickham</td>
<td style="text-align: right;">47</td>
</tr>
<tr class="even">
<td style="text-align: left;">Max Kuhn</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Lionel Henry</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">Winston Chang</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Daniel Falbel</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jennifer Bryan</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Davis Vaughan</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Carson Sievert</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tomasz Kalinowski</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Barret Schloerke</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Thomas Lin Pedersen</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Christophe Dervieux</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hannah Frick</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Joe Cheng</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Julia Silge</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-rstudio-developers" style="flex-basis: 50.0%;justify-content: center;display: flex;">
<div id="tbl-rstudio-developers-2" class="anchored">
<figure class="quarto-float quarto-subfloat-tbl figure"><figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-rstudio-developers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 续表
</figcaption><div aria-describedby="tbl-rstudio-developers-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-rstudio-developers-2" class="table">
<thead><tr class="header">
<th style="text-align: left;">团队成员</th>
<th style="text-align: right;">R 包数量</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Cole Arendt</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Edgar Ruiz</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JJ Allaire</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Kevin Kuo</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Kevin Ushey</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Richard Iannone</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aron Atkins</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Romain François</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Yitao Li</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brian Smith</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Emil Hvitfeldt</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Garrick Aden-Buie</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">James Blair</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Nathan Stephens</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nick Strayer</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<p>在开发维护的 R 包里，谢益辉所给的联系邮箱是 <a href="mailto:xie@yihui.name" class="email">xie@yihui.name</a>，就不在上述之列，因此，表中所列仅是部分而已。</p>
<p>CRAN 和 RStudio 团队是 R 语言社区最为熟悉的，其它团队需借助一些网络分析算法挖掘了。</p>
</section><section id="sec-community-developer" class="level2" data-number="23.3"><h2 data-number="23.3" class="anchored" data-anchor-id="sec-community-developer">
<span class="header-section-number">23.3</span> R 语言社区的开发者</h2>
<section id="sec-top-developer" class="level3" data-number="23.3.1"><h3 data-number="23.3.1" class="anchored" data-anchor-id="sec-top-developer">
<span class="header-section-number">23.3.1</span> 最高产的开发者</h3>
<p>继续基于数据集 pdb ，将维护 R 包数量比较多的开发者统计出来。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>pdb_ctb <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(<span class="at">data =</span> pdb, Package <span class="sc">~</span> Maintainer, <span class="at">FUN =</span> length)</span>
<span id="cb21-2"><a href="#cb21-2"></a></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pdb_ctb[pdb_ctb<span class="sc">$</span>Package <span class="sc">&gt;=</span> <span class="dv">20</span>, ]) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> Package, <span class="at">y =</span> <span class="fu">reorder</span>(Maintainer, Package)), <span class="at">width =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"R 包数量"</span>, <span class="at">y =</span> <span class="st">"开发者"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-top-maintainer" class="quarto-figure quarto-figure-center anchored" width="576">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-top-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-top-maintainer-1.png" class="img-fluid figure-img" width="576">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-top-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.3: 高产的 R 包开发者
</figcaption></figure>
</div>
</div>
</div>
<p>发现，开发 1 个 R 包的开发者有 7656 人，开发 2 个 R 包的开发者有 1678 人，第二名是第一名的五分之一，递减规律非常符合指数分布。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">table</span>(pdb_ctb<span class="sc">$</span>Package)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
#&gt;    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 
#&gt; 7656 1678  652  299  158   71   69   45   39   34   23   16   16   10   11    2 
#&gt;   17   18   19   20   21   22   23   24   25   26   28   31   32   33   42   47 
#&gt;    2    3    6    2    2    3    3    1    5    2    1    1    1    1    1    1 
#&gt;   52   56   61   68 
#&gt;    1    1    1    1</code></pre>
</div>
</div>
<p>过滤掉非常高产的开发者，可以发现变化规律服从幂律分布。</p>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pdb_ctb, <span class="fu">aes</span>(<span class="at">x =</span> Package)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"R 包数量"</span>, <span class="at">y =</span> <span class="st">"开发者"</span>)</span>
<span id="cb24-5"><a href="#cb24-5"></a></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pdb_ctb[pdb_ctb<span class="sc">$</span>Package <span class="sc">&lt;=</span> <span class="dv">20</span>, ], <span class="fu">aes</span>(<span class="at">x =</span> Package)) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"gray20"</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"R 包数量"</span>, <span class="at">y =</span> <span class="st">"开发者"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-dist-maintainer" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-dist-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-dist-maintainer" style="flex-basis: 50.0%;justify-content: flex-start;display: flex;">
<div id="fig-dist-maintainer-1" class="quarto-figure quarto-figure-center anchored" width="384">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-dist-maintainer-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-dist-maintainer-1.png" class="img-fluid figure-img" data-ref-parent="fig-dist-maintainer" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-dist-maintainer-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 直方图
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-dist-maintainer" style="flex-basis: 50.0%;justify-content: flex-start;display: flex;">
<div id="fig-dist-maintainer-2" class="quarto-figure quarto-figure-center anchored" width="384">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-dist-maintainer-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-dist-maintainer-2.png" class="img-fluid figure-img" data-ref-parent="fig-dist-maintainer" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-dist-maintainer-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 直方图（对数尺度）
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dist-maintainer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.4: 开发者数量的分布
</figcaption></figure>
</div>
<p>最高产 Top 1% 的开发者 117 人（开发 R 包超过 10 个的开发者）贡献了 2060 / 18976 = 10.8% 扩展包 ，高产的是有组织的，商业公司、开源组织、大学机构。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">dim</span>(pdb_ctb[pdb_ctb<span class="sc">$</span>Package <span class="sc">&gt;</span> <span class="dv">10</span>, ])</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 117   2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">sum</span>(pdb_ctb[pdb_ctb<span class="sc">$</span>Package <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="st">"Package"</span>])</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 2060</code></pre>
</div>
</div>
<p>最低产 Bottom 的开发者 7656 人（仅开发一个 R 包的开发者） 贡献了 7656 / 18976 扩展包 40.3 %，低产的人是主体。</p>
</section><section id="sec-coauthor-relation" class="level3" data-number="23.3.2"><h3 data-number="23.3.2" class="anchored" data-anchor-id="sec-coauthor-relation">
<span class="header-section-number">23.3.2</span> 开发者协作关系</h3>
<p>一个 R 包有一个唯一的维护者，可能有一个至多个贡献者，这样，维护者和贡献者之间就形成了有向关系，贡献者可能又是另一个 R 包的维护者，也可能不是。不仅有向而且可能存在环。在一个 R 包中，A 是 B 的贡献者，而在另一个 R 包中，B 是 A 的贡献者，A 和 B 之间可能通过多个 R 包存在多次互相协作关系，这也表明 A 和 B 之间的关系密切。有向环的节点可能有 2 个以上。一个人可能同时属于多个环。</p>
<p>维护者 A 接受来自多个开发者的贡献，接受次数（所有贡献者人数的累和，A 的每个 R 包的贡献者人数相加）视为 A 的入度。维护者 A 作为开发者给多个维护者贡献，贡献次数（作为开发者给其它 R 包做贡献的次数，向外参与贡献的 R 包数目）视为 A 的出度。注意，A 作为维护者，必然包含 A 作为开发者，忽略 A 到 A 的贡献，只考虑贡献/协作关系。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>pdb <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"data/cran-package-db-20221231.rds"</span>)</span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="co"># 过滤重复和缺失的记录</span></span>
<span id="cb29-3"><a href="#cb29-3"></a>pdb <span class="ot">&lt;-</span> <span class="fu">subset</span>(</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="at">x =</span> pdb, <span class="at">subset =</span> <span class="sc">!</span><span class="fu">duplicated</span>(Package) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Authors@R</span><span class="st">`</span>),</span>
<span id="cb29-5"><a href="#cb29-5"></a>  <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Maintainer"</span>, <span class="st">"Author"</span>, <span class="st">"Authors@R"</span>)</span>
<span id="cb29-6"><a href="#cb29-6"></a>)</span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co"># 提取维护者的名字</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>pdb<span class="sc">$</span>Maintainer <span class="ot">&lt;-</span> <span class="fu">extract_maintainer</span>(pdb<span class="sc">$</span>Maintainer)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>有些包的元数据中没有 Authors@R 字段，有可能是没有贡献者，比如 mgcv 包、gam 包等，但也有可能是有贡献者，只是维护者没有填写这个字段，比如 Rcpp 包、RcppEigen 包等，因此将这些先过滤出来。总之，本文是以 <code>Authors@R</code> 字段作为贡献者的来源，共计 12503 个 R 包含有 <code>Authors@R</code> ，有 6000+ 个 R 包没有该字段，缺失约占 R 包总数的 1/3，在不那么考虑准确性的情况下，也可以使用。Author 字段是一段没有结构的文本，相比于 Author 字段，<code>Authors@R</code> 字段是以 R 语言中的 person 类型为存储结构的，比较规范，因此，提取贡献者的操作比较方便。作为示例，下面提取 Matrix 包的贡献者。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>tmp <span class="ot">&lt;-</span> <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> pdb[pdb<span class="sc">$</span>Package <span class="sc">==</span> <span class="st">"Matrix"</span>, <span class="st">"Authors@R"</span>]))</span>
<span id="cb30-2"><a href="#cb30-2"></a>tmp <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(tmp, <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">include =</span> <span class="fu">c</span>(<span class="st">"given"</span>, <span class="st">"family"</span>))))</span>
<span id="cb30-3"><a href="#cb30-3"></a><span class="co"># 返回一个整洁的数据框</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>tmp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Package =</span> <span class="st">"Matrix"</span>, <span class="at">Maintainer =</span> pdb[pdb<span class="sc">$</span>Package <span class="sc">==</span> <span class="st">"Matrix"</span>, <span class="st">"Maintainer"</span>], <span class="at">Authors =</span> tmp)</span>
<span id="cb30-5"><a href="#cb30-5"></a><span class="co"># 去掉 Authors 是 Maintainer 的记录</span></span>
<span id="cb30-6"><a href="#cb30-6"></a><span class="fu">subset</span>(tmp, <span class="at">subset =</span> Maintainer <span class="sc">!=</span> Authors)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   Package      Maintainer           Authors
#&gt; 1  Matrix Martin Maechler     Douglas Bates
#&gt; 3  Matrix Martin Maechler      Mikael Jagan
#&gt; 4  Matrix Martin Maechler  Timothy A. Davis
#&gt; 5  Matrix Martin Maechler Jens Oehlschlägel
#&gt; 6  Matrix Martin Maechler       Jason Riedy
#&gt; 7  Matrix Martin Maechler       R Core Team</code></pre>
</div>
</div>
<p>数据框包含 R 包（Package 字段）、及其维护者（Maintainer 字段）和贡献者（Authors 字段）。将上述过程写成一个函数，接着，将所有 R 包的贡献者提取出来，形成一个大的数据框。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>extract_authors <span class="ot">&lt;-</span> <span class="cf">function</span>(pkg) {</span>
<span id="cb32-2"><a href="#cb32-2"></a>  sub_pdb <span class="ot">&lt;-</span> pdb[pdb<span class="sc">$</span>Package <span class="sc">==</span> pkg, ]</span>
<span id="cb32-3"><a href="#cb32-3"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> sub_pdb[, <span class="st">"Authors@R"</span>]))</span>
<span id="cb32-4"><a href="#cb32-4"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(tmp, <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">include =</span> <span class="fu">c</span>(<span class="st">"given"</span>, <span class="st">"family"</span>))))</span>
<span id="cb32-5"><a href="#cb32-5"></a>  tmp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Package =</span> pkg, <span class="at">Maintainer =</span> sub_pdb[, <span class="st">"Maintainer"</span>], <span class="at">Authors =</span> tmp)</span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">subset</span>(tmp, <span class="at">subset =</span> Maintainer <span class="sc">!=</span> Authors)</span>
<span id="cb32-7"><a href="#cb32-7"></a>}</span>
<span id="cb32-8"><a href="#cb32-8"></a><span class="fu">extract_authors</span>(<span class="st">"Matrix"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   Package      Maintainer           Authors
#&gt; 1  Matrix Martin Maechler     Douglas Bates
#&gt; 3  Matrix Martin Maechler      Mikael Jagan
#&gt; 4  Matrix Martin Maechler  Timothy A. Davis
#&gt; 5  Matrix Martin Maechler Jens Oehlschlägel
#&gt; 6  Matrix Martin Maechler       Jason Riedy
#&gt; 7  Matrix Martin Maechler       R Core Team</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co"># lapply(c("Matrix", "gt"), extract_authors)</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="co"># 抽取所有 R 包的贡献者，运行需要1-2分钟时间</span></span>
<span id="cb34-3"><a href="#cb34-3"></a>pdb_authors_list <span class="ot">&lt;-</span> <span class="fu">lapply</span>(pdb[, <span class="st">"Package"</span>], extract_authors)</span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="co"># 合并列表</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>pdb_authors_dt <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">rbindlist</span>(pdb_authors_list)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>最后整理出来的大数据框 <strong><code>pdb_authors_dt</code></strong> 含有近 26000 条记录，即边的规模大小。考虑到有些维护者和贡献者之间可能存在多次合作的情况，下面统计一下合作次数。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="co"># tmp &lt;- aggregate(Package ~ Maintainer  + Authors, data = pdb_authors_dt, FUN = length)</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="co"># tmp[tmp$Package &gt;= 10, ]</span></span>
<span id="cb35-3"><a href="#cb35-3"></a></span>
<span id="cb35-4"><a href="#cb35-4"></a>pdb_authors_dt[ ,.(<span class="at">cnt =</span> <span class="fu">length</span>(Package)) , by <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Maintainer"</span>, <span class="st">"Authors"</span>)][cnt <span class="sc">&gt;=</span> <span class="dv">10</span>, ][<span class="fu">order</span>(cnt, <span class="at">decreasing =</span> T), ]</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                 Maintainer               Authors cnt
#&gt;  1:         Hadley Wickham               RStudio  36
#&gt;  2:          Pablo Sanchez            Windsor.ai  25
#&gt;  3:           Jan Wijffels                BNOSAC  24
#&gt;  4:           Gábor Csárdi               RStudio  19
#&gt;  5:               Hong Ooi             Microsoft  16
#&gt;  6:               Max Kuhn               RStudio  14
#&gt;  7:           Lionel Henry               RStudio  14
#&gt;  8:      Robrecht Cannoodt        Wouter Saelens  13
#&gt;  9:      Scott Chamberlain              rOpenSci  13
#&gt; 10:            Joe Thorley    Poisson Consulting  13
#&gt; 11:      Frederic Bertrand Myriam Maumy-Bertrand  12
#&gt; 12:          Winston Chang               RStudio  12
#&gt; 13:          Daniel Falbel               RStudio  12
#&gt; 14:           David Kretch           Adam Banker  12
#&gt; 15:           David Kretch      Amazon.com, Inc.  12
#&gt; 16:         Victor Perrier           Fanny Meyer  11
#&gt; 17:         Jennifer Bryan               RStudio  11
#&gt; 18: William Michael Landau Eli Lilly and Company  11
#&gt; 19:        Adrian Baddeley             Ege Rubak  11
#&gt; 20:           Gábor Csárdi            Jim Hester  10
#&gt; 21:          Kirill Müller               RStudio  10
#&gt; 22:         Carson Sievert               RStudio  10
#&gt; 23:    Thomas Lin Pedersen               RStudio  10
#&gt; 24:           Lionel Henry        Hadley Wickham  10
#&gt; 25:        Adrian Baddeley           Rolf Turner  10
#&gt;                 Maintainer               Authors cnt</code></pre>
</div>
</div>
<p>Authors 字段出现了不少组织的名字，这是因为有许多 R 包的维护者受雇于该组织，版权归属于该组织，组织不仅提供持续的资金，而且还提供其它帮助。以 <strong>dplyr</strong> 包为例，Hadley Wickham 受雇于 RStudio 公司，在 dplyr 包的元数据中，字段 <code>Authors@R</code> 中 RStudio 的角色是 cph 和 fnd ，即版权所有和资金支持。角色 cre 就是维护者，负责与 CRAN 团队的沟通。角色 aut 就是对 R 包有实质贡献的人。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">format</span>(<span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> pdb[pdb<span class="sc">$</span>Package <span class="sc">==</span> <span class="st">"dplyr"</span>, <span class="st">"Authors@R"</span>])),</span>
<span id="cb37-2"><a href="#cb37-2"></a>       <span class="at">include =</span> <span class="fu">c</span>(<span class="st">"given"</span>, <span class="st">"family"</span>, <span class="st">"role"</span>))</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Hadley Wickham [aut, cre]" "Romain François [aut]"    
#&gt; [3] "Lionel Henry [aut]"        "Kirill Müller [aut]"      
#&gt; [5] "RStudio [cph, fnd]"</code></pre>
</div>
</div>
<p>此外，同属于一个组织的维护者之间常常合作紧密，从上面的结果可以看到，Gábor Csárdi 和 Jim Hester ，Lionel Henry 和 Hadley Wickham，Carson Sievert 和 Joe Cheng ，Jennifer Bryan 和 Hadley Wickham 等同属于 RStudio 公司，常常协作开发项目。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>pdb_authors_net <span class="ot">&lt;-</span> pdb_authors_dt[, .(<span class="at">cnt =</span> .N), by <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Maintainer"</span>, <span class="st">"Authors"</span>)]</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>统计协作次数的分布，可以发现，绝大多数人之间只有一次。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">table</span>(pdb_authors_net<span class="sc">$</span>cnt)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; 
#&gt;     1     2     3     4     5     6     7     8     9    10    11    12    13 
#&gt; 20435  1511   365   121    44    28    14     8     3     6     4     5     3 
#&gt;    14    16    19    24    25    36 
#&gt;     2     1     1     1     1     1</code></pre>
</div>
</div>
</section><section id="sec-network-degree" class="level3" data-number="23.3.3"><h3 data-number="23.3.3" class="anchored" data-anchor-id="sec-network-degree">
<span class="header-section-number">23.3.3</span> 节点出入度分布</h3>
<p>下面简化这个网络，仅考虑贡献者也是维护者的情况，就是说网络中所有节点既是维护者也是贡献者，这会过滤掉组织机构、大量没有在 CRAN 发过 R 包的贡献者、从没给其它维护者做贡献的维护者。简化后，网络节点的出度、入度的分布图如下。</p>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># Maintainer 的入度</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>pdb_authors_net_indegree <span class="ot">&lt;-</span> pdb_authors_dt[Authors <span class="sc">%in%</span> Maintainer, ][, .(<span class="at">in_degree =</span> <span class="fu">length</span>(Authors)), by <span class="ot">=</span> <span class="st">"Maintainer"</span>]</span>
<span id="cb42-3"><a href="#cb42-3"></a><span class="co"># Authors 的出度</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>pdb_authors_net_outdegree <span class="ot">&lt;-</span> pdb_authors_dt[Authors <span class="sc">%in%</span> Maintainer, ][, .(<span class="at">out_degree =</span> <span class="fu">length</span>(Maintainer)), by <span class="ot">=</span> <span class="st">"Authors"</span>]</span>
<span id="cb42-5"><a href="#cb42-5"></a></span>
<span id="cb42-6"><a href="#cb42-6"></a><span class="fu">ggplot</span>(pdb_authors_net_indegree, <span class="fu">aes</span>(<span class="at">x =</span> in_degree)) <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>  <span class="fu">theme_classic</span>()</span>
<span id="cb42-10"><a href="#cb42-10"></a><span class="fu">ggplot</span>(pdb_authors_net_outdegree, <span class="fu">aes</span>(<span class="at">x =</span> out_degree)) <span class="sc">+</span></span>
<span id="cb42-11"><a href="#cb42-11"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb42-13"><a href="#cb42-13"></a>  <span class="fu">theme_classic</span>()</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-network-degree" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-network-degree-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-network-degree" style="flex-basis: 50.0%;justify-content: flex-start;display: flex;">
<div id="fig-network-degree-1" class="quarto-figure quarto-figure-center anchored" width="384">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-network-degree-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-network-degree-1.png" class="img-fluid figure-img" data-ref-parent="fig-network-degree" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-network-degree-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 入度的分布
</figcaption></figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-network-degree" style="flex-basis: 50.0%;justify-content: flex-start;display: flex;">
<div id="fig-network-degree-2" class="quarto-figure quarto-figure-center anchored" width="384">
<figure class="quarto-float quarto-subfloat-fig figure"><div aria-describedby="fig-network-degree-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-network-degree-2.png" class="img-fluid figure-img" data-ref-parent="fig-network-degree" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-network-degree-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 出度的分布
</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-network-degree-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.5: 节点的入度和出度的分布
</figcaption></figure>
</div>
</section><section id="sec-visual-coauthor-network" class="level3" data-number="23.3.4"><h3 data-number="23.3.4" class="anchored" data-anchor-id="sec-visual-coauthor-network">
<span class="header-section-number">23.3.4</span> 可视化协作网络</h3>
<p>节点的大小以维护者维护的 R 包数量来表示，边的大小以维护者之间协作次数来表示。为了美观起见，更为了突出重点，仅保留协作次数大于 1 的边。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># 边</span></span>
<span id="cb43-2"><a href="#cb43-2"></a>pdb_authors_net_edge <span class="ot">&lt;-</span> pdb_authors_dt[Authors <span class="sc">%in%</span> Maintainer, ][, .(<span class="at">edge_cnt =</span> .N), by <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Authors"</span>, <span class="st">"Maintainer"</span>)][edge_cnt <span class="sc">&gt;</span> <span class="dv">1</span>,]</span>
<span id="cb43-3"><a href="#cb43-3"></a>pdb_authors_net_edge</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                   Authors          Maintainer edge_cnt
#&gt;   1:      Abdollah Safari          Amin Adibi        2
#&gt;   2: Rafael H. M. Pereira   Daniel Herszenhut        3
#&gt;   3:       Pierre Neuvial Morgane Pierre-Jean        2
#&gt;   4:          R Core Team      Vincent Goulet        2
#&gt;   5:      Thibaut Jombart     Zhian N. Kamvar        2
#&gt;  ---                                                  
#&gt; 526:          Aaron Wolen   Scott Chamberlain        2
#&gt; 527:            Bob Rudis       Simon Garnier        2
#&gt; 528:        Marco Sciaini       Simon Garnier        2
#&gt; 529:       Carlos Morales         Martin Chan        2
#&gt; 530:            Md Yeasin   Ranjit Kumar Paul        2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="co"># 顶点</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>pdb_authors_net_vertex <span class="ot">&lt;-</span> pdb_authors_dt[, .(<span class="at">vertex_cnt =</span> <span class="fu">length</span>(<span class="fu">unique</span>(Package))), by <span class="ot">=</span> <span class="st">"Maintainer"</span>][Maintainer <span class="sc">%in%</span> <span class="fu">c</span>(pdb_authors_net_edge<span class="sc">$</span>Maintainer, pdb_authors_net_edge<span class="sc">$</span>Authors),]</span>
<span id="cb45-3"><a href="#cb45-3"></a>pdb_authors_net_vertex</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                Maintainer vertex_cnt
#&gt;   1:           Matt Nunes          9
#&gt;   2:              Jin Zhu          3
#&gt;   3:       Julio Trecenti          3
#&gt;   4:      Reinhard Furrer          4
#&gt;   5:           Amin Adibi          4
#&gt;  ---                                
#&gt; 579:        Carlo Pacioni          1
#&gt; 580:    Ranjit Kumar Paul          2
#&gt; 581:       Michael Scholz          1
#&gt; 582: Javier Roca-Pardinas          1
#&gt; 583:         Xianying Tan          1</code></pre>
</div>
</div>
<p>这是一个有向图，其各个字段含义如下。</p>
<ul>
<li>Maintainer 维护者 to</li>
<li>Authors 贡献者 from</li>
<li>
<code>edge_cnt</code> 边的大小表示维护者 Maintainer 和贡献者 Authors 的协作次数</li>
<li>
<code>vertex_cnt</code> 顶点大小表示维护者 Maintainer 维护的 R 包数量</li>
</ul>
<p>可视化网络的 R 包有 <strong>igraph</strong> 、<strong>ggraph</strong> 等，专业的软件有 Gephi 等。下面先考虑用 R 包可视化这个复杂的有向带权网络。<code>pdb_authors_net_edge</code> 和 <code>pdb_authors_net_vertex</code> 都是数据框，首先调用 igraph 包的函数 <code>graph_from_data_frame()</code> 将其转化为网络类型 <code>igraph</code> ，然后使用函数 <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> 绘制网络图。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="co"># 构造图</span></span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="fu">library</span>(igraph)</span>
<span id="cb47-3"><a href="#cb47-3"></a>pdb_authors_graph <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(<span class="at">d =</span> pdb_authors_net_edge, <span class="at">vertices =</span> pdb_authors_net_vertex, <span class="at">directed =</span> T)</span>
<span id="cb47-4"><a href="#cb47-4"></a><span class="co"># 可视化</span></span>
<span id="cb47-5"><a href="#cb47-5"></a>op <span class="ot">&lt;-</span> <span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">4</span>))</span>
<span id="cb47-6"><a href="#cb47-6"></a><span class="fu">plot</span>(pdb_authors_graph,</span>
<span id="cb47-7"><a href="#cb47-7"></a>  <span class="at">edge.width =</span> (<span class="fu">E</span>(pdb_authors_graph)<span class="sc">$</span>edge_cnt) <span class="sc">/</span> <span class="dv">2</span>,</span>
<span id="cb47-8"><a href="#cb47-8"></a>  <span class="at">edge.arrow.size =</span> .<span class="dv">01</span>,</span>
<span id="cb47-9"><a href="#cb47-9"></a>  <span class="at">edge.curved =</span> .<span class="dv">1</span>,</span>
<span id="cb47-10"><a href="#cb47-10"></a>  <span class="at">layout =</span> layout.kamada.kawai,</span>
<span id="cb47-11"><a href="#cb47-11"></a>  <span class="at">vertex.size =</span> (<span class="fu">V</span>(pdb_authors_graph)<span class="sc">$</span>vertex_cnt) <span class="sc">/</span> <span class="dv">8</span>,</span>
<span id="cb47-12"><a href="#cb47-12"></a>  <span class="at">vertex.label.cex =</span> <span class="fu">sqrt</span>(<span class="fu">V</span>(pdb_authors_graph)<span class="sc">$</span>vertex_cnt) <span class="sc">/</span> <span class="dv">8</span></span>
<span id="cb47-13"><a href="#cb47-13"></a>)</span>
<span id="cb47-14"><a href="#cb47-14"></a><span class="fu">on.exit</span>(<span class="fu">par</span>(op), <span class="at">add =</span> <span class="cn">TRUE</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-network-igraph" class="quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-network-igraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-network-igraph-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-network-igraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.6: 开发者之间的贡献网络
</figcaption></figure>
</div>
</div>
</div>
<p>协作关系弱的开发者占大部分，构成一个「月亮」的造型，其中，不乏维护多个 R 包的开发者，这些人要么单干，要么在专业小领域、小组织内协作。与之相对应的是协作关系较强的开发者，人数虽少，影响力却大，构成一个「太阳」的造型。协作得多往往意味着维护的 R 包也不少，甚至同属于一个组织，因此，高产的开发者、影响力大的组织聚集在一起，如 R Core Team、RStudio、rOpenSci 等。</p>
<p>下面使用 <strong>tidygraph</strong> 包构造图数据、计算节点中心度，<strong>dplyr</strong> 包操作数据。中心度代表节点（维护者）的影响力。最后，借助 <strong>ggraph</strong> 包绘制维护者之间的贡献网络，节点的大小代表维护者影响力的强弱。</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>pdb_authors_g <span class="ot">&lt;-</span> tidygraph<span class="sc">::</span><span class="fu">as_tbl_graph</span>(pdb_authors_net_edge, <span class="at">directed =</span> T) <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2"></a> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">Popularity =</span> tidygraph<span class="sc">::</span><span class="fu">centrality_degree</span>(<span class="at">mode =</span> <span class="st">'in'</span>))</span>
<span id="cb48-3"><a href="#cb48-3"></a></span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb48-5"><a href="#cb48-5"></a><span class="fu">ggraph</span>(pdb_authors_g, <span class="at">layout =</span> <span class="st">"kk"</span>) <span class="sc">+</span></span>
<span id="cb48-6"><a href="#cb48-6"></a>  <span class="fu">geom_edge_fan</span>(<span class="fu">aes</span>(<span class="at">alpha =</span> <span class="fu">after_stat</span>(index)), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb48-7"><a href="#cb48-7"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> Popularity), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">"sans"</span>)</span></code><button title="复制到剪贴板" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Warning: Using the `size` aesthetic in this geom was deprecated in ggplot2 3.4.0.
#&gt; ℹ Please use `linewidth` in the `default_aes` field and elsewhere instead.</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-network-ggraph" class="quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-network-ggraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analyze-network-data_files/figure-html/fig-network-ggraph-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-network-ggraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
图&nbsp;23.7: 开发者影响力网络
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="sec-analysis-network-data-exercise" class="level2" data-number="23.4"><h2 data-number="23.4" class="anchored" data-anchor-id="sec-analysis-network-data-exercise">
<span class="header-section-number">23.4</span> 习题</h2>
<ol type="1">
<li>分析 R 包的影响力，可视化依赖关系网络。类似协作关系的分析，可以统计一个 R 包被多少 R 包依赖。统计 R 包被依赖的深度。若 R 包 A 被 R 包 B 依赖，R 包 B 被 R 包 C 依赖，以此类推。</li>
<li>本文基于 2022 年 12 月 31 日的 R 包元数据进行分析，请与 2023 年 12 月 31 日的数据比较。</li>
</ol>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Bates2013" class="csl-entry" role="listitem">
Bates, Douglas, 和 Dirk Eddelbuettel. 2013. <span>《Fast and Elegant Numerical Linear Algebra Using the <span>RcppEigen</span> Package》</span>. <em>Journal of Statistical Software</em> 52 (5): 1–24. <a href="https://doi.org/10.18637/jss.v052.i05">https://doi.org/10.18637/jss.v052.i05</a>.
</div>
<div id="ref-DrWhy2023" class="csl-entry" role="listitem">
Biecek, Przemyslaw. 2023. <em><span>DrWhy</span>: Explain, Explore and Debug Predictive Machine Learning Models</em>. <a href="https://github.com/ModelOriented/DrWhy">https://github.com/ModelOriented/DrWhy</a>.
</div>
<div id="ref-Kolaczyk2020" class="csl-entry" role="listitem">
Kolaczyk, Eric D., 和 Gábor Csárdi. 2020. <em>Statistical Analysis of Network Data with <span>R</span></em>. 2nd 本. Springer, New York, NY. <a href="https://doi.org/10.1007/978-3-030-44129-6">https://doi.org/10.1007/978-3-030-44129-6</a>.
</div>
<div id="ref-Kuhn2020" class="csl-entry" role="listitem">
Kuhn, Max, 和 Hadley Wickham. 2020. <em>Tidymodels: a collection of packages for modeling and machine learning using tidyverse principles.</em> <a href="https://www.tidymodels.org">https://www.tidymodels.org</a>.
</div>
<div id="ref-Lang2023" class="csl-entry" role="listitem">
Lang, Michel, 和 Patrick Schratz. 2023. <em><span>mlr3verse</span>: Easily Install and Load the <span>mlr3</span> Package Family</em>. <a href="https://CRAN.R-project.org/package=mlr3verse">https://CRAN.R-project.org/package=mlr3verse</a>.
</div>
<div id="ref-Daniel2019" class="csl-entry" role="listitem">
Lüdecke, Daniel. 2019. <em><span>strengejacke</span>: Load Packages Associated with Strenge Jacke!</em> <a href="https://github.com/strengejacke/strengejacke">https://github.com/strengejacke/strengejacke</a>.
</div>
<div id="ref-Makowski2022" class="csl-entry" role="listitem">
Lüdecke, Daniel, Mattan S. Ben-Shachar, Indrajeet Patil, Brenton M. Wiernik, Etienne Bacher, Rémi Thériault, 和 Dominique Makowski. 2022. <span>《<span>easystats</span>: Framework for Easy Statistical Modeling, Visualization, and Reporting》</span>. <em>CRAN</em>. <a href="https://easystats.github.io/easystats/">https://easystats.github.io/easystats/</a>.
</div>
<div id="ref-Tyner2017" class="csl-entry" role="listitem">
Tyner, Sam, François Briatte, 和 Heike Hofmann. 2017. <span>《Network Visualization with <span>ggplot2</span>》</span>. <em><span>The R Journal</span></em> 9 (1): 27–59. <a href="https://doi.org/10.32614/RJ-2017-023">https://doi.org/10.32614/RJ-2017-023</a>.
</div>
<div id="ref-Hadley2016" class="csl-entry" role="listitem">
Wickham, Hadley. 2016. <em><span>ggplot2</span>: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-Wickham2019" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, 等. 2019. <span>《Welcome to the <span>tidyverse</span>》</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
</div>
</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "已复制");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "已复制");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./power-analysis.html" class="pagination-link  aria-label=">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">统计检验的功效</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./analyze-text-data.html" class="pagination-link" aria-label="<span class='chapter-number'>24</span>&nbsp; <span class='chapter-title'>文本分析</span>">
        <span class="nav-page-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">文本分析</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/XiangyunHuang/data-analysis-in-action/blob/main/analyze-network-data.qmd" class="toc-action"><i class="bi bi-github"></i>查看代码</a></li></ul></div></div></div></footer></body></html>