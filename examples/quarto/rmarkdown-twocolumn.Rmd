---
title: "R Markdown 双栏排版"
subtitle: "副标题"
author: "张三"
date: "`r Sys.Date()`"
mathspec: yes
fontsize: 10pt
graphics: yes
lot: yes
lof: yes
geometry: margin=1.18in
output: 
  bookdown::pdf_book: 
    number_sections: yes
    toc: yes
    fig_crop: no
    latex_engine: xelatex
    base_format: rmarkdown::pdf_document
    citation_package: natbib
    template: null
    extra_dependencies:
      sourcecodepro:
       - scale=0.85
      ctex:
       - heading=true
       - fontset=fandol
      caption:
       - labelfont=bf
       - singlelinecheck=off
       - textfont=it
       - justification=centering
      Alegreya: null
keywords: 
  - 动态文档
  - 分栏排版
subject: "可重复研究与动态文档"
abstract: |
  这里是摘要内容
bibliography: 
 - packages.bib
biblio-style: plainnat
natbiboptions: "authoryear,round"
link-citations: true
colorlinks: true
classoption: "UTF8,a4paper,twocolumn"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
sysfonts::font_add(
  family = "Noto Serif CJK SC",
  regular = "NotoSerifCJKsc-Regular.otf",
  bold = "NotoSerifCJKsc-Bold.otf"
)
## 黑体
sysfonts::font_add(
  family = "Noto Sans CJK SC",
  regular = "NotoSansCJKsc-Regular.otf",
  bold = "NotoSansCJKsc-Bold.otf"
)
sysfonts::font_add(
  family = "Arial",
  regular = "Arial.TTF",
  bold = "Arialbd.TTF",
  italic = "Ariali.TTF",
  bolditalic = "Arialbi.TTF"
)

sysfonts::font_add(
  family = "Times New Roman",
  regular = "Times.TTF",
  bold = "Timesbd.TTF",
  italic = "Timesi.TTF",
  bolditalic = "Timesbi.TTF"
)
```

# R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## 插图 {#sec:plot}

You can also embed plots, for example:

```{r}
#| showtext, 
#| fig.cap="showtext 包处理图里的中文", 
#| fig.width=5, 
#| fig.height=4,
#| fig.showtext=TRUE, 
#| out.width="95%", 
#| echo=FALSE

library(ggplot2)
ggplot(iris, aes(Sepal.Length, Sepal.Width)) +
  geom_point(aes(colour = Species)) +
  scale_colour_brewer(palette = "Set1") +
  labs(
    title = "鸢尾花数据的散点图",
    x = "萼片长度", y = "萼片宽度", colour = "鸢尾花类别",
    caption = "鸢尾花数据集最早见于 Edgar Anderson (1935) "
  ) +
  theme_minimal(base_family = "Times New Roman") +
  theme(
    title = element_text(family = "Noto Sans CJK SC"),
    axis.title = element_text(family = "Noto Serif CJK SC"),
    legend.title = element_text(family = "Noto Serif CJK SC")
  )
```

# 参考文献 {#chap:refer}

```{r bib,include=FALSE,cache=FALSE}
# automatically create a bib database for R packages
bib <- knitr::write_bib(
  x = c(
    .packages(), "knitr", "rmarkdown", "bookdown"
  ), file = NULL, prefix = ""
)
bib <- unlist(bib)
# remove the ugly single quotes required by CRAN policy
bib <- gsub("(\\\n)", " ", bib)
xfun::write_utf8(bib, "packages.bib")
```
